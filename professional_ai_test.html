<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIä¸–ä»£èƒ½åŠ›æ¸¬é©— - ç™¼ç¾ä½ çš„å…¨çƒæ’å</title>
    <meta name="description" content="å…¨çƒé¦–å‰µAIèƒ½åŠ›åˆ†ç´šæ¸¬é©—ï¼Œå³æ™‚æ›´æ–°å…¨çƒæ’åç³»çµ±">
    <meta property="og:title" content="AIä¸–ä»£èƒ½åŠ›æ¸¬é©— - ä½ çš„AIæ®µä½æ˜¯ä»€éº¼ï¼Ÿ">
    <meta property="og:description" content="5åˆ†é˜æ¸¬å‡ºä½ çš„AIèƒ½åŠ›æ®µä½ï¼ŒåŠ å…¥å…¨çƒå³æ™‚æ’åï¼">
    <meta property="og:image" content="https://via.placeholder.com/1200x630/667eea/ffffff?text=AI%E4%B8%96%E4%BB%A3%E8%83%BD%E5%8A%9B%E6%B8%AC%E9%A9%97">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Microsoft JhengHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 10;
        }

        .hero-section {
            text-align: center;
            padding: 60px 30px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            margin-bottom: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57);
            background-size: 200% 100%;
            animation: rainbow 3s linear infinite;
        }

        @keyframes rainbow {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }

        .hero-title {
            font-size: 48px;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .hero-subtitle {
            font-size: 20px;
            color: #666;
            margin-bottom: 30px;
            font-weight: 400;
        }

        .creator-badge {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            color: white;
            padding: 12px 24px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.3);
        }

        .creator-badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(255, 107, 107, 0.4);
        }

        .stats-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.9);
            padding: 30px 20px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stat-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
        }

        .stat-number {
            font-size: 36px;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
            font-weight: 500;
        }

        .test-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            padding: 50px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            margin: 40px 0;
            position: relative;
            overflow: hidden;
        }

        .user-form {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 40px;
            border: 2px solid rgba(102, 126, 234, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .progress-container {
            margin-bottom: 40px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            width: 0%;
        }

        .progress-text {
            text-align: center;
            font-size: 14px;
            color: #666;
            font-weight: 500;
        }

        .question-container {
            opacity: 0;
            transform: translateX(50px);
            animation: slideIn 0.6s ease forwards;
        }

        @keyframes slideIn {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .question-number {
            font-size: 14px;
            color: #667eea;
            font-weight: 600;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .question-title {
            font-size: 28px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 30px;
            line-height: 1.3;
        }

        .options-grid {
            display: grid;
            gap: 15px;
            margin: 30px 0;
        }

        .option-card {
            background: white;
            border: 2px solid #e8ecf4;
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .option-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.15);
        }

        .option-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: scale(1.02);
        }

        .option-label {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .option-description {
            font-size: 14px;
            opacity: 0.8;
            line-height: 1.4;
        }

        .result-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            padding: 50px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            text-align: center;
            display: none;
            position: relative;
            overflow: hidden;
        }

        .result-container.show {
            display: block;
            animation: resultAppear 0.8s ease forwards;
        }

        @keyframes resultAppear {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .result-badge {
            display: inline-block;
            font-size: 64px;
            margin-bottom: 20px;
            filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.1));
        }

        .result-title {
            font-size: 36px;
            font-weight: 800;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .result-description {
            font-size: 18px;
            color: #666;
            margin-bottom: 40px;
            line-height: 1.6;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .result-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .result-stat {
            background: rgba(102, 126, 234, 0.1);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(102, 126, 234, 0.2);
        }

        .result-stat-number {
            font-size: 28px;
            font-weight: 800;
            color: #667eea;
            margin-bottom: 5px;
        }

        .result-stat-label {
            font-size: 14px;
            color: #666;
            font-weight: 500;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            display: inline-block;
            margin: 10px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            box-shadow: 0 10px 30px rgba(240, 147, 251, 0.3);
        }

        .btn-secondary:hover {
            box-shadow: 0 15px 40px rgba(240, 147, 251, 0.4);
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .loading-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 300px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .leaderboard-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            padding: 50px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            margin: 40px 0;
            display: none;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 20px;
            margin: 10px 0;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .leaderboard-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
        }

        .rank-number {
            font-size: 24px;
            font-weight: 800;
            color: #667eea;
            min-width: 50px;
            text-align: center;
        }

        .user-info {
            flex-grow: 1;
            margin-left: 20px;
        }

        .username {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
        }

        .user-details {
            font-size: 14px;
            color: #666;
            margin-top: 4px;
        }

        .user-score {
            font-size: 20px;
            font-weight: 700;
            color: #27ae60;
        }

        .medal {
            font-size: 32px;
            margin-right: 10px;
        }

        @media (max-width: 768px) {
            .hero-title {
                font-size: 36px;
            }
            
            .test-container, .result-container {
                padding: 30px 20px;
                margin: 20px 0;
                border-radius: 20px;
            }
            
            .question-title {
                font-size: 24px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .result-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- æ¨™é¡Œå€åŸŸ -->
        <div class="hero-section">
            <h1 class="hero-title">ğŸ¤– AIä¸–ä»£èƒ½åŠ›æ¸¬é©—</h1>
            <p class="hero-subtitle">å…¨çƒé¦–å‰µAIèƒ½åŠ›åˆ†ç´šç³»çµ± - å³æ™‚æ’å</p>
            <p style="color: #888; margin-bottom: 30px;">
                åœ¨AIå¿«é€Ÿç™¼å±•çš„æ™‚ä»£ï¼Œç™¼ç¾ä½ çš„çœŸå¯¦AIæ®µä½ï¼ŒåŠ å…¥å…¨çƒå³æ™‚æ’åï¼
            </p>
            <a href="https://portaly.cc/zn.studio" target="_blank" class="creator-badge">
                <span style="margin-right: 8px;">ğŸš€</span>
                ç”± Nick Chang | ZN Studio å‰µä½œ
            </a>
        </div>

        <!-- å³æ™‚çµ±è¨ˆ -->
        <div class="stats-section">
            <div class="stat-card">
                <div class="stat-number" id="totalUsers">è¼‰å…¥ä¸­...</div>
                <div class="stat-label">å…¨çƒåƒèˆ‡äººæ•¸</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="averageScore">--</div>
                <div class="stat-label">å¹³å‡åˆ†æ•¸</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="topScore">--</div>
                <div class="stat-label">æœ€é«˜åˆ†æ•¸</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="onlineNow">--</div>
                <div class="stat-label">ç›®å‰åœ¨ç·š</div>
            </div>
        </div>

        <!-- æ¸¬é©—å€åŸŸ -->
        <div class="test-container" id="testContainer">
            <!-- ç”¨æˆ¶è³‡æ–™è¡¨å–® -->
            <div class="user-form">
                <h3 style="color: #2c3e50; margin-bottom: 20px; text-align: center;">
                    ğŸ“ è«‹å¡«å¯«åŸºæœ¬è³‡æ–™ä»¥åŠ å…¥å…¨çƒæ’å
                </h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="username">æš±ç¨± *</label>
                        <input type="text" id="username" placeholder="è«‹è¼¸å…¥ä½ çš„æš±ç¨±" required maxlength="20">
                    </div>
                    <div class="form-group">
                        <label for="location">åœ°å€</label>
                        <select id="location">
                            <option value="">é¸æ“‡åœ°å€ï¼ˆå¯é¸ï¼‰</option>
                            <option value="å°åŒ—">å°åŒ—</option>
                            <option value="æ–°åŒ—">æ–°åŒ—</option>
                            <option value="æ¡ƒåœ’">æ¡ƒåœ’</option>
                            <option value="å°ä¸­">å°ä¸­</option>
                            <option value="å°å—">å°å—</option>
                            <option value="é«˜é›„">é«˜é›„</option>
                            <option value="å…¶ä»–å°ç£åœ°å€">å…¶ä»–å°ç£åœ°å€</option>
                            <option value="é¦™æ¸¯">é¦™æ¸¯</option>
                            <option value="æ–°åŠ å¡">æ–°åŠ å¡</option>
                            <option value="é¦¬ä¾†è¥¿äº">é¦¬ä¾†è¥¿äº</option>
                            <option value="ä¸­åœ‹å¤§é™¸">ä¸­åœ‹å¤§é™¸</option>
                            <option value="å…¶ä»–">å…¶ä»–</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="occupation">è·æ¥­</label>
                        <select id="occupation">
                            <option value="">é¸æ“‡è·æ¥­ï¼ˆå¯é¸ï¼‰</option>
                            <option value="å­¸ç”Ÿ">å­¸ç”Ÿ</option>
                            <option value="å·¥ç¨‹å¸«">å·¥ç¨‹å¸«</option>
                            <option value="è¨­è¨ˆå¸«">è¨­è¨ˆå¸«</option>
                            <option value="è¡ŒéŠ·äººå“¡">è¡ŒéŠ·äººå“¡</option>
                            <option value="å‰µæ¥­è€…">å‰µæ¥­è€…</option>
                            <option value="æ•™å¸«">æ•™å¸«</option>
                            <option value="é†«è­·äººå“¡">é†«è­·äººå“¡</option>
                            <option value="é‡‘èæ¥­">é‡‘èæ¥­</option>
                            <option value="æœå‹™æ¥­">æœå‹™æ¥­</option>
                            <option value="è‡ªç”±å·¥ä½œè€…">è‡ªç”±å·¥ä½œè€…</option>
                            <option value="å…¶ä»–">å…¶ä»–</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="ageGroup">å¹´é½¡å±¤</label>
                        <select id="ageGroup">
                            <option value="">é¸æ“‡å¹´é½¡å±¤ï¼ˆå¯é¸ï¼‰</option>
                            <option value="18-24">18-24æ­²</option>
                            <option value="25-34">25-34æ­²</option>
                            <option value="35-44">35-44æ­²</option>
                            <option value="45-54">45-54æ­²</option>
                            <option value="55+">55æ­²ä»¥ä¸Š</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">æº–å‚™é–‹å§‹æ¸¬é©—</div>
            </div>

            <div class="question-container" id="questionContainer">
                <div style="text-align: center; padding: 40px;">
                    <button class="btn" onclick="startTest()" style="font-size: 18px; padding: 20px 50px;">
                        ğŸš€ é–‹å§‹æ¸¬é©—
                    </button>
                </div>
            </div>
        </div>

        <!-- çµæœå€åŸŸ -->
        <div class="result-container" id="resultContainer">
            <div class="result-badge" id="resultBadge">ğŸ†</div>
            <h2 class="result-title" id="resultTitle">æ¸¬é©—å®Œæˆ</h2>
            <p class="result-description" id="resultDescription">çµæœæè¿°</p>

            <div class="result-stats">
                <div class="result-stat">
                    <div class="result-stat-number" id="userScore">--</div>
                    <div class="result-stat-label">ä½ çš„åˆ†æ•¸</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-number" id="userRank">--</div>
                    <div class="result-stat-label">å…¨çƒæ’å</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-number" id="userPercentile">--</div>
                    <div class="result-stat-label">è¶…è¶Šç”¨æˆ¶</div>
                </div>
            </div>

            <div style="margin: 40px 0;">
                <button class="btn" onclick="shareResult()">
                    ğŸ“¤ åˆ†äº«æˆ‘çš„AIæ®µä½
                </button>
                <button class="btn btn-secondary" onclick="showLeaderboard()">
                    ğŸ† æŸ¥çœ‹å…¨çƒæ’è¡Œæ¦œ
                </button>
            </div>

            <div style="margin-top: 30px; padding: 20px; background: rgba(102, 126, 234, 0.1); border-radius: 15px;">
                <p style="color: #666; font-size: 14px; margin-bottom: 10px;">
                    <strong>æƒ³æå‡ä½ çš„AIèƒ½åŠ›ï¼Ÿ</strong>
                </p>
                <p style="color: #888; font-size: 12px; margin-bottom: 15px;">
                    åŠ å…¥Nick Changçš„Lineç¤¾ç¾¤ï¼Œç²å¾—æœ€æ–°AIå­¸ç¿’è³‡æºï¼
                </p>
                <a href="https://reurl.cc/1OZNAY" target="_blank" class="btn" style="font-size: 14px; padding: 12px 24px;">
                    ğŸ¯ åŠ å…¥AIå­¸ç¿’ç¤¾ç¾¤
                </a>
            </div>
        </div>

        <!-- æ’è¡Œæ¦œå€åŸŸ -->
        <div class="leaderboard-section" id="leaderboardSection">
            <h2 style="text-align: center; margin-bottom: 30px; color: #2c3e50;">ğŸ† å…¨çƒæ’è¡Œæ¦œ</h2>
            <div id="leaderboardContent">
                <div style="text-align: center; padding: 40px;">
                    <div class="spinner"></div>
                    <p>è¼‰å…¥æ’è¡Œæ¦œä¸­...</p>
                </div>
            </div>
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="hideLeaderboard()">è¿”å›çµæœ</button>
            </div>
        </div>
    </div>

    <script>
        // ===============================
        // Firebase è¨­å®šå€åŸŸ
        // ===============================
        
        // ğŸ”¥ é‡è¦ï¼šè«‹æ›¿æ›ç‚ºä½ çš„ Firebase é…ç½®
        const firebaseConfig = {
            apiKey: "AIzaSyAqwdMVnhrj0Ktj9BTEOVJdpzBLPpMaTq",
            authDomain: "ai-level-test.firebaseapp.com", 
            projectId: "ai-level-test",
            storageBucket: "ai-level-test.firebasestorage.app",
            messagingSenderId: "774029966921",
            appId: "1:774029966921:web:5bceaeb011e665f4ccc40c",
            measurementId: "G-TH0M0VXRZC"
        };

        // åˆå§‹åŒ– Firebaseï¼ˆå¦‚æœé…ç½®å®Œæ•´çš„è©±ï¼‰
        let db = null;
        let firebaseInitialized = false;

        function initializeFirebase() {
            try {
                if (firebaseConfig.apiKey !== "APIé ˆæ›´æ–°") {
                    firebase.initializeApp(firebaseConfig);
                    db = firebase.firestore();
                    firebaseInitialized = true;
                    console.log('Firebase åˆå§‹åŒ–æˆåŠŸ');
                    
                    // è¨­å®šå³æ™‚ç›£è½
                    setupRealTimeStats();
                } else {
                    console.log('Firebase é…ç½®æœªå®Œæˆï¼Œä½¿ç”¨æ¨¡æ“¬æ¨¡å¼');
                    simulateStats();
                }
            } catch (error) {
                console.error('Firebase åˆå§‹åŒ–å¤±æ•—:', error);
                simulateStats();
            }
        }

        // ===============================
        // å…¨åŸŸè®Šæ•¸
        // ===============================
        
        let currentQuestion = 0;
        let answers = {};
        let startTime = Date.now();
        let userResult = null;

        // å•é¡Œåº«
        const questions = [
            {
                title: "ä½ å¤šä¹…ä½¿ç”¨ä¸€æ¬¡ AI å·¥å…·ï¼Ÿ",
                options: [
                    { label: "ğŸ” AIæ–°æ‰‹", desc: "å¾ä¾†æ²’ç”¨éï¼Œä½†è½èªªé ChatGPT", value: 1 },
                    { label: "ğŸŒ± å¶çˆ¾å˜—è©¦", desc: "æ¯æœˆç”¨ 1-2 æ¬¡ï¼Œä¸»è¦æ˜¯å¥½å¥‡", value: 2 },
                    { label: "âš¡ å®šæœŸä½¿ç”¨è€…", desc: "æ¯é€±ä½¿ç”¨å¹¾æ¬¡ï¼Œé–‹å§‹ç¿’æ…£", value: 3 },
                    { label: "ğŸš€ é‡åº¦ä¾è³´", desc: "å¹¾ä¹æ¯å¤©ä½¿ç”¨ï¼Œå·¥ä½œç”Ÿæ´»éƒ½éœ€è¦", value: 4 },
                    { label: "ğŸ‘‘ AIå¤§å¸«", desc: "ä¸€å¤©å¤šæ¬¡ï¼Œå·²ç¶“ç„¡æ³•æƒ³åƒæ²’æœ‰ AI çš„ç”Ÿæ´»", value: 5 }
                ]
            },
            {
                title: "ä½ ä¸»è¦ç”¨ AI ä¾†åšä»€éº¼ï¼Ÿ",
                options: [
                    { label: "ğŸ” åŸºç¤æŸ¥è©¢", desc: "å•ç°¡å–®å•é¡Œï¼Œå°±åƒä½¿ç”¨ Google", value: 1 },
                    { label: "ğŸ“ å…§å®¹å‰µä½œ", desc: "å¯«æ–‡ç« ã€ç¿»è­¯ã€å­¸ç¿’æ–°çŸ¥è­˜", value: 2 },
                    { label: "ğŸ’¼ å·¥ä½œæ‡‰ç”¨", desc: "è™•ç†æ–‡ä»¶ã€è£½ä½œç°¡å ±ã€æ•¸æ“šåˆ†æ", value: 3 },
                    { label: "âš¡ å°ˆæ¥­é–‹ç™¼", desc: "å¯«ç¨‹å¼ã€å‰µæ„è¨­è¨ˆã€è¤‡é›œå°ˆæ¡ˆ", value: 4 },
                    { label: "ğŸ¤– ç³»çµ±æ•´åˆ", desc: "å»ºç«‹ AI å·¥ä½œæµç¨‹ã€è¨“ç·´æ¨¡å‹", value: 5 }
                ]
            },
            {
                title: "ä½ å° AI æç¤ºè©ï¼ˆPromptï¼‰çš„æŒæ¡ç¨‹åº¦ï¼Ÿ", 
                options: [
                    { label: "â“ å®Œå…¨ä¸æ‡‚", desc: "ä¸çŸ¥é“ä»€éº¼æ˜¯æç¤ºè©", value: 1 },
                    { label: "ğŸ—£ï¸ åŸºç¤å°è©±", desc: "æœƒå•ç°¡å–®å•é¡Œ", value: 2 },
                    { label: "ğŸ“‹ æ¸…æ¥šæŒ‡ä»¤", desc: "æœƒå¯«æ¸…æ¥šçš„æŒ‡ä»¤å’Œè¦æ±‚", value: 3 },
                    { label: "ğŸ¯ é€²éšæŠ€å·§", desc: "æœƒç”¨è§’è‰²è¨­å®šã€ç¯„ä¾‹ç­‰æŠ€å·§", value: 4 },
                    { label: "ğŸ”¬ å°ˆå®¶ç´š", desc: "ç²¾é€šè¤‡é›œæç¤ºè©å·¥ç¨‹", value: 5 }
                ]
            },
            {
                title: "ä½ ä½¿ç”¨éå¤šå°‘ç¨®ä¸åŒçš„ AI å·¥å…·ï¼Ÿ",
                options: [
                    { label: "0ï¸âƒ£ åªè½èªªé", desc: "åªè½èªªé ChatGPT", value: 1 },
                    { label: "1ï¸âƒ£ åˆå­¸è€…", desc: "ç”¨é 1-2 ç¨®ï¼ˆChatGPTã€Gemini ç­‰ï¼‰", value: 2 },
                    { label: "3ï¸âƒ£ æ¢ç´¢è€…", desc: "ç”¨é 3-5 ç¨®ä¸åŒé¡å‹ AI å·¥å…·", value: 3 },
                    { label: "8ï¸âƒ£ å¯¦è¸è€…", desc: "ç”¨é 5-10 ç¨®ï¼ŒåŒ…å«å°ˆæ¥­å·¥å…·", value: 4 },
                    { label: "ğŸŒŸ æ”¶è—å®¶", desc: "è¶…é 10 ç¨®ï¼Œæ¶µè“‹å„é ˜åŸŸ AI å·¥å…·", value: 5 }
                ]
            },
            {
                title: "AI å°ä½ å·¥ä½œ/å­¸ç¿’æ•ˆç‡çš„æå‡ç¨‹åº¦ï¼Ÿ",
                options: [
                    { label: "ğŸš« æ²’æœ‰å½±éŸ¿", desc: "å®Œå…¨æ²’ç”¨é AI å”åŠ©å·¥ä½œ", value: 1 },
                    { label: "ğŸ“– å¶çˆ¾æŸ¥è©¢", desc: "å¶çˆ¾ç”¨ä¾†æŸ¥è³‡æ–™æˆ–ç¿»è­¯", value: 2 },
                    { label: "â¬†ï¸ å°å¹…æå‡", desc: "æå‡äº† 20-30% çš„å·¥ä½œæ•ˆç‡", value: 3 },
                    { label: "ğŸš€ é‡è¦åŠ©æ‰‹", desc: "AI å·²æˆç‚ºå·¥ä½œçš„é‡è¦åŠ©æ‰‹", value: 4 },
                    { label: "ğŸ’ ä¸å¯æˆ–ç¼º", desc: "æ²’æœ‰ AI å°±ç„¡æ³•æ­£å¸¸å·¥ä½œ", value: 5 }
                ]
            }
        ];

        // ===============================
        // è³‡æ–™åº«æ“ä½œå‡½æ•¸
        // ===============================

        // æäº¤æ¸¬é©—çµæœ
        async function submitTestResult(userData) {
            if (!firebaseInitialized) {
                // æ¨¡æ“¬æ¨¡å¼
                return {
                    success: true,
                    rank: Math.floor(Math.random() * 1000) + 100,
                    userId: 'demo_' + Date.now()
                };
            }

            try {
                const userId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                
                const testData = {
                    ...userData,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    ip_hash: await hashIP(await getUserIP()),
                    user_agent: navigator.userAgent,
                    test_duration: Math.floor((Date.now() - startTime) / 1000)
                };
                
                await db.collection('rankings').doc(userId).set(testData);
                await updateGlobalStats(testData);
                
                const userRank = await calculateUserRank(testData.score);
                
                return { success: true, rank: userRank, userId: userId };
            } catch (error) {
                console.error('å„²å­˜å¤±æ•—:', error);
                return { 
                    success: false, 
                    error: error.message,
                    rank: Math.floor(Math.random() * 1000) + 100
                };
            }
        }

        // è¨ˆç®—ç”¨æˆ¶æ’å
        async function calculateUserRank(userScore) {
            if (!firebaseInitialized) return Math.floor(Math.random() * 1000) + 100;
            
            try {
                const snapshot = await db.collection('rankings')
                    .where('score', '>', userScore)
                    .get();
                return snapshot.size + 1;
            } catch (error) {
                console.error('è¨ˆç®—æ’åå¤±æ•—:', error);
                return Math.floor(Math.random() * 1000) + 100;
            }
        }

        // ç²å–æ’è¡Œæ¦œ
        async function getLeaderboard(limit = 20) {
            if (!firebaseInitialized) {
                // æ¨¡æ“¬æ•¸æ“š
                return generateMockLeaderboard();
            }
            
            try {
                const snapshot = await db.collection('rankings')
                    .orderBy('score', 'desc')
                    .orderBy('timestamp', 'asc')
                    .limit(limit)
                    .get();
                
                const leaderboard = [];
                snapshot.forEach((doc, index) => {
                    const data = doc.data();
                    leaderboard.push({
                        rank: index + 1,
                        id: doc.id,
                        username: data.username,
                        location: data.location || 'æœªçŸ¥',
                        occupation: data.occupation || 'æœªçŸ¥',
                        score: data.score,
                        level: data.level,
                        timestamp: data.timestamp
                    });
                });
                
                return leaderboard;
            } catch (error) {
                console.error('ç²å–æ’è¡Œæ¦œå¤±æ•—:', error);
                return generateMockLeaderboard();
            }
        }

        // è¨­å®šå³æ™‚çµ±è¨ˆç›£è½
        function setupRealTimeStats() {
            if (!firebaseInitialized) return;
            
            db.collection('stats').doc('global')
                .onSnapshot((doc) => {
                    if (doc.exists) {
                        const stats = doc.data();
                        updateStatsUI(stats);
                    }
                });
        }

        // æ›´æ–°å…¨åŸŸçµ±è¨ˆ
        async function updateGlobalStats(newUserData) {
            if (!firebaseInitialized) return;
            
            const globalStatsRef = db.collection('stats').doc('global');
            
            await db.runTransaction(async (transaction) => {
                const doc = await transaction.get(globalStatsRef);
                
                if (!doc.exists) {
                    transaction.set(globalStatsRef, {
                        total_users: 1,
                        average_score: newUserData.score,
                        top_score: newUserData.score,
                        last_updated: firebase.firestore.FieldValue.serverTimestamp(),
                        level_distribution: {
                            [newUserData.level]: 1
                        }
                    });
                } else {
                    const currentStats = doc.data();
                    const newTotalUsers = currentStats.total_users + 1;
                    const newAverageScore = ((currentStats.average_score * currentStats.total_users) + newUserData.score) / newTotalUsers;
                    
                    transaction.update(globalStatsRef, {
                        total_users: newTotalUsers,
                        average_score: Math.round(newAverageScore * 10) / 10,
                        top_score: Math.max(currentStats.top_score, newUserData.score),
                        last_updated: firebase.firestore.FieldValue.serverTimestamp(),
                        [`level_distribution.${newUserData.level}`]: firebase.firestore.FieldValue.increment(1)
                    });
                }
            });
        }

        // ===============================
        // è¼”åŠ©å‡½æ•¸
        // ===============================

        async function getUserIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                return 'unknown';
            }
        }

        async function hashIP(ip) {
            const encoder = new TextEncoder();
            const data = encoder.encode(ip + 'ai-test-salt');
            const hashBuffer = await crypto.subtle.digest('SHA-256', data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        // æ¨¡æ“¬çµ±è¨ˆæ•¸æ“š
        function simulateStats() {
            const mockStats = {
                total_users: 12847 + Math.floor(Math.random() * 100),
                average_score: 18.3,
                top_score: 25,
                last_updated: new Date()
            };
            updateStatsUI(mockStats);
            
            // å®šæœŸæ›´æ–°æ¨¡æ“¬æ•¸æ“š
            setInterval(() => {
                mockStats.total_users += Math.floor(Math.random() * 3);
                updateStatsUI(mockStats);
            }, 10000);
        }

        // æ›´æ–°çµ±è¨ˆUI
        function updateStatsUI(stats) {
            document.getElementById('totalUsers').textContent = stats.total_users.toLocaleString();
            document.getElementById('averageScore').textContent = stats.average_score;
            document.getElementById('topScore').textContent = stats.top_score;
            
            const onlineEstimate = Math.floor(stats.total_users * (0.1 + Math.random() * 0.2));
            document.getElementById('onlineNow').textContent = onlineEstimate.toLocaleString();
        }

        // ç”Ÿæˆæ¨¡æ“¬æ’è¡Œæ¦œ
        function generateMockLeaderboard() {
            const names = ['AIé”äºº', 'ç§‘æŠ€æ–°æ˜Ÿ', 'ç¨‹å¼é«˜æ‰‹', 'è¨­è¨ˆå¸«å°ç‹', 'å‰µæ¥­å®¶', 'å­¸ç¿’ç‹‚', 'å·¥ç¨‹å¸«A', 'æ•¸æ“šåˆ†æå¸«', 'ç”¢å“ç¶“ç†', 'ChatGPTæ„›ç”¨è€…'];
            const locations = ['å°åŒ—', 'ä¸Šæµ·', 'é¦™æ¸¯', 'æ–°åŠ å¡', 'å°ä¸­', 'æ·±åœ³', 'é«˜é›„', 'åŒ—äº¬', 'å»£å·', 'æ±äº¬'];
            const occupations = ['å·¥ç¨‹å¸«', 'è¨­è¨ˆå¸«', 'å­¸ç”Ÿ', 'å‰µæ¥­è€…', 'è¡ŒéŠ·äººå“¡', 'æ•¸æ“šåˆ†æå¸«', 'ç”¢å“ç¶“ç†', 'è‡ªç”±å·¥ä½œè€…'];
            
            return Array.from({length: 20}, (_, i) => ({
                rank: i + 1,
                username: names[Math.floor(Math.random() * names.length)] + (Math.floor(Math.random() * 999) + 1),
                location: locations[Math.floor(Math.random() * locations.length)],
                occupation: occupations[Math.floor(Math.random() * occupations.length)],
                score: 25 - Math.floor(i / 2) - Math.floor(Math.random() * 3),
                level: i < 3 ? 'master' : i < 8 ? 'diamond' : i < 15 ? 'gold' : 'silver'
            }));
        }

        // ===============================
        // æ¸¬é©—é‚è¼¯
        // ===============================

        function startTest() {
            const username = document.getElementById('username').value.trim();
            if (!username) {
                alert('è«‹å¡«å¯«æš±ç¨±æ‰èƒ½é–‹å§‹æ¸¬é©—ï¼');
                document.getElementById('username').focus();
                return;
            }

            currentQuestion = 0;
            answers = {};
            startTime = Date.now();
            loadQuestion();
        }

        function loadQuestion() {
            if (currentQuestion >= questions.length) {
                calculateResult();
                return;
            }

            const question = questions[currentQuestion];
            const container = document.getElementById('questionContainer');
            
            container.style.opacity = '0';
            setTimeout(() => {
                container.innerHTML = `
                    <div class="question-number">å•é¡Œ ${currentQuestion + 1}</div>
                    <h2 class="question-title">${question.title}</h2>
                    <div class="options-grid">
                        ${question.options.map((option, index) => `
                            <div class="option-card" onclick="selectOption(${option.value})">
                                <div class="option-label">${option.label}</div>
                                <div class="option-description">${option.desc}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
                container.style.opacity = '1';
                updateProgress();
            }, 300);
        }

        function selectOption(value) {
            answers[currentQuestion] = value;
            
            // è¦–è¦ºåé¥‹
            const options = document.querySelectorAll('.option-card');
            options.forEach(option => option.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            
            setTimeout(() => {
                currentQuestion++;
                loadQuestion();
            }, 800);
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `å•é¡Œ ${currentQuestion + 1} / ${questions.length}`;
        }

    // ... (calculateResult å‡½æ•¸çš„å‰åŠéƒ¨åˆ†) ...

async function calculateResult() {
    const totalScore = Object.values(answers).reduce((sum, value) => sum + value, 0);
    const level = determineLevel(totalScore);
    
    const userData = {
        username: document.getElementById('username').value.trim(),
        location: document.getElementById('location').value || 'æœªçŸ¥',
        occupation: document.getElementById('occupation').value || 'æœªçŸ¥', 
        age_group: document.getElementById('ageGroup').value || 'æœªçŸ¥',
        score: totalScore,
        level: level,
        answers: answers
    };

    showLoading('æ­£åœ¨å„²å­˜çµæœä¸¦è¨ˆç®—å…¨çƒæ’å...');
    
    // submitTestResult å·²ç¶“å¹«æˆ‘å€‘æ‹¿åˆ°äº† rank
    const submitResult = await submitTestResult(userData);
    
    hideLoading();
    
    // é€™è£¡æˆ‘å€‘ç›´æ¥ä½¿ç”¨ submitTestResult çš„çµæœ
    if (submitResult.success) {
        userResult = {
            ...userData,
            rank: submitResult.rank,
            userId: submitResult.userId
        };

        // ç¾åœ¨ä¾†ç²å–ç¸½äººæ•¸ä¸¦è¨ˆç®—ç™¾åˆ†ä½
        const { totalUsers, percentile } = await calculatePercentile(submitResult.rank);
        
        // å‘¼å« showResult
        showResult(level, totalScore, submitResult.rank, percentile, totalUsers);

    } else {
        alert('æäº¤çµæœå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚');
        // å¯ä»¥è€ƒæ…®é‡æ–°è¼‰å…¥é é¢æˆ–è¿”å›é¦–é 
    }
}

// æ–°å¢é€™å€‹è¼”åŠ©å‡½æ•¸ä¾†ç²å–ç¸½äººæ•¸å’Œè¨ˆç®—ç™¾åˆ†ä½
async function calculatePercentile(userRank) {
    if (!firebaseInitialized) {
        // æ¨¡æ“¬æ¨¡å¼
        const totalUsers = 12987;
        const percentile = Math.round((1 - (userRank / totalUsers)) * 100);
        return { totalUsers, percentile };
    }

    try {
        const statsDoc = await db.collection('stats').doc('global').get();
        if (statsDoc.exists) {
            const totalUsers = statsDoc.data().total_users;
            const percentile = Math.round((1 - (userRank / totalUsers)) * 100);
            return { totalUsers, percentile };
        }
        // å¦‚æœ stats æ–‡ä»¶ä¸å­˜åœ¨ï¼Œçµ¦ä¸€å€‹é è¨­å€¼
        return { totalUsers: 1, percentile: 100 };
    } catch (error) {
        console.error('ç²å–ç¸½ç”¨æˆ¶æ•¸å¤±æ•—:', error);
        // å¤±æ•—æ™‚çš„å›é€€æ–¹æ¡ˆ
        const totalUsers = 12987; // ä½¿ç”¨ä¸€å€‹å¤§æ¦‚çš„æ•¸å­—
        const percentile = Math.round((1 - (userRank / totalUsers)) * 100);
        return { totalUsers, percentile };
    }
}

        function determineLevel(score) {
            if (score <= 8) return 'bronze';
            if (score <= 12) return 'silver';
            if (score <= 16) return 'gold';
            if (score <= 20) return 'diamond';
            return 'master';
        }

function showResult(level, score, rank, percentile, total) {
    const levelData = {
        bronze: { badge: 'ğŸ¥‰', title: 'AI æ–°æ‰‹æ‘', color: '#CD7F32' },
        silver: { badge: 'ğŸ¥ˆ', title: 'AI æ¢ç´¢è€…', color: '#C0C0C0' },
        gold: { badge: 'ğŸ¥‡', title: 'AI å¯¦è¸å®¶', color: '#FFD700' },
        diamond: { badge: 'ğŸ’', title: 'AI å°ˆå®¶', color: '#B9F2FF' },
        master: { badge: 'ğŸ‘‘', title: 'AI å¤§å¸«', color: '#9400D3' }
    };

    const data = levelData[level] || levelData["bronze"];

    document.getElementById('testContainer').style.display = 'none';
    document.getElementById('resultBadge').textContent = data.badge;
    document.getElementById('resultTitle').textContent = data.title;
    document.getElementById('resultDescription').textContent = getResultDescription(level);
    document.getElementById('userScore').textContent = `${score}/25`;
    document.getElementById('userRank').textContent = `#${rank.toLocaleString()} / ${total}`;
    document.getElementById('userPercentile').textContent = `å‰${percentile}%`;

    document.getElementById('resultContainer').classList.add('show');
    document.getElementById('resultContainer').scrollIntoView({ behavior: 'smooth' });

    createCelebration();
}

        function getResultDescription(level) {
            const descriptions = {
                bronze: 'ä½ å‰›é–‹å§‹æ¥è§¸ AI ä¸–ç•Œï¼æ¯å€‹å°ˆå®¶éƒ½æ˜¯å¾æ–°æ‰‹é–‹å§‹çš„ï¼Œç¹¼çºŒæ¢ç´¢ AI çš„ç„¡é™å¯èƒ½å§ï¼',
                silver: 'ä½ å·²ç¶“é–‹å§‹ç†Ÿæ‚‰ AI å·¥å…·ï¼ç¹¼çºŒå­¸ç¿’é€²éšæŠ€å·§ï¼Œå¾ˆå¿«å°±èƒ½æˆç‚º AI å¯¦è¸å®¶ã€‚',
                gold: 'æ­å–œï¼ä½ å·²ç¶“èƒ½å¤ ç†Ÿç·´é‹ç”¨ AI æå‡å·¥ä½œæ•ˆç‡ï¼Œå±¬æ–¼ AI æ™‚ä»£çš„å…ˆè¡Œè€…ï¼',
                diamond: 'å¤ªå²å®³äº†ï¼ä½ æ˜¯çœŸæ­£çš„ AI å°ˆå®¶ï¼Œèƒ½å¤ æ·±åº¦æ•´åˆ AI åˆ°æ—¥å¸¸å·¥ä½œæµç¨‹ä¸­ã€‚',
                master: 'å“‡ï¼ä½ æ˜¯ AI é ˜åŸŸçš„é ‚å°–å¤§å¸«ï¼ä½ çš„ AI èƒ½åŠ›å·²ç¶“é”åˆ°å°ˆæ¥­ç´šæ°´æº–ï¼Œå¯ä»¥æˆç‚ºä»–äººçš„å°å¸«ã€‚'
            };
            return descriptions[level];
        }

        // ===============================
        // UI åŠŸèƒ½å‡½æ•¸
        // ===============================

        function showLoading(message) {
            const overlay = document.createElement('div');
            overlay.className = 'loading-overlay';
            overlay.id = 'loadingOverlay';
            overlay.innerHTML = `
                <div class="loading-content">
                    <div class="spinner"></div>
                    <p style="color: #666; margin: 0;">${message}</p>
                </div>
            `;
            document.body.appendChild(overlay);
        }

        function hideLoading() {
            const overlay = document.getElementById('loadingOverlay');
            if (overlay) overlay.remove();
        }

        function createCelebration() {
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.innerHTML = ['ğŸ‰', 'âœ¨', 'ğŸŠ', 'â­'][Math.floor(Math.random() * 4)];
                    confetti.style.cssText = `
                        position: fixed;
                        left: ${Math.random() * 100}vw;
                        top: -10px;
                        font-size: 20px;
                        z-index: 1000;
                        pointer-events: none;
                        animation: fall ${Math.random() * 3 + 2}s linear forwards;
                    `;
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 5000);
                }, i * 100);
            }
        }

        async function showLeaderboard() {
            document.getElementById('leaderboardSection').style.display = 'block';
            document.getElementById('leaderboardSection').scrollIntoView({ behavior: 'smooth' });
            
            const leaderboard = await getLeaderboard();
            const content = document.getElementById('leaderboardContent');
            
            if (leaderboard.length === 0) {
                content.innerHTML = '<p style="text-align: center; color: #666;">æš«ç„¡æ’è¡Œæ¦œæ•¸æ“š</p>';
                return;
            }
            
            content.innerHTML = leaderboard.map(user => {
                const medal = user.rank === 1 ? 'ğŸ¥‡' : user.rank === 2 ? 'ğŸ¥ˆ' : user.rank === 3 ? 'ğŸ¥‰' : '';
                const isCurrentUser = userResult && user.id === userResult.userId;
                
                return `
                    <div class="leaderboard-item" style="${isCurrentUser ? 'background: linear-gradient(135deg, #e3f2fd, #f0f8ff); border: 2px solid #2196f3;' : ''}">
                        ${medal ? `<div class="medal">${medal}</div>` : ''}
                        <div class="rank-number">#${user.rank}</div>
                        <div class="user-info">
                            <div class="username">${user.username} ${isCurrentUser ? '(ä½ )' : ''}</div>
                            <div class="user-details">${user.location} Â· ${user.occupation}</div>
                        </div>
                        <div class="user-score">${user.score}åˆ†</div>
                    </div>
                `;
            }).join('');
        }

        function hideLeaderboard() {
            document.getElementById('leaderboardSection').style.display = 'none';
            document.getElementById('resultContainer').scrollIntoView({ behavior: 'smooth' });
        }

        function shareResult() {
            if (!userResult) return;
            
            const shareText = `æˆ‘å‰›å®Œæˆäº†å…¨çƒé¦–å‰µçš„ AI ä¸–ä»£èƒ½åŠ›æ¸¬é©—ï¼

ğŸ¯ æˆ‘çš„æ®µä½ï¼š${document.getElementById('resultTitle').textContent}
ğŸ“Š å¾—åˆ†ï¼š${userResult.score}/25 åˆ†
ğŸ† å…¨çƒæ’åï¼šç¬¬ ${userResult.rank} å

ä½ çš„ AI èƒ½åŠ›åœ¨å…¨çƒè™•æ–¼ä»€éº¼ä½ç½®ï¼Ÿå¿«ä¾†æ¸¬è©¦çœ‹çœ‹ï¼

ç”± Nick Chang | ZN Studio å‰µä½œ
#AIæ¸¬é©— #äººå·¥æ™ºæ…§ #ChatGPT #ç§‘æŠ€`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'AI ä¸–ä»£èƒ½åŠ›æ¸¬é©—çµæœ',
                    text: shareText,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(shareText + '\n\n' + window.location.href).then(() => {
                    showNotification('çµæœå·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼å¿«å»åˆ†äº«çµ¦æœ‹å‹å€‘å§ ğŸ‰');
                });
            }
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #667eea, #764ba2);
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                z-index: 1000;
                font-weight: 600;
                animation: slideInRight 0.5s ease forwards;
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.5s ease forwards';
                setTimeout(() => notification.remove(), 500);
            }, 3000);
        }

        // ===============================
        // åˆå§‹åŒ–
        // ===============================

        document.addEventListener('DOMContentLoaded', function() {
            initializeFirebase();
        });

        // æ·»åŠ å‹•ç•«CSS
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fall {
                to {
                    transform: translateY(100vh) rotate(360deg);
                    opacity: 0;
                }
            }
            
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // é˜²æ­¢æ¸¬é©—é€²è¡Œä¸­é›¢é–‹é é¢
        window.addEventListener('beforeunload', function(e) {
            if (currentQuestion > 0 && currentQuestion < questions.length) {
                e.preventDefault();
                e.returnValue = 'ä½ çš„æ¸¬é©—é€²åº¦å°‡æœƒéºå¤±ï¼Œç¢ºå®šè¦é›¢é–‹å—ï¼Ÿ';
            }
        });
    </script>
</body>
</html>
